{% extends 'reviews/base.html' %}
{% block title %}ibComics Reviews: All Reviewers{% endblock %}
{% block allreviews %}{{ block.super }}{% endblock %}
{% block allcomics %}{{ block.super }}{% endblock %}
{% block allreviewers %}All Reviewers{% endblock %}

{% block content %}
    <h1>All Reviewers</h1>
    {% if reviewer_list %}
        <table class="reviewerstable" id="reviewerstable">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Reviews</th>
                    {% if user and user.is_active %}
                        <th>Message</th>
                    {% endif %}
                </tr>
            </thead>
            <tbody>
                {% for reviewer in reviewer_list %}
                    <tr>
                        <td>{{ reviewer.name }}</td>
                        <td>
                            <a href="{% url 'reviewerdetail' reviewer.id %}">({{ reviewer.review_set.count }} reviews)</a>
                        </td>
                        {% if user and user.is_active %}
                            <td>
                                {% if user.id == reviewer.user.id %}
                                    (Welcome; we appreciate ALL your effort! Go review something!)
                                {% endif %}
                            </td>
                        {% endif %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>

        <script>
            tableid = "reviewerstable";
            $(document).ready(function() {
                $('#'+tableid).dataTable({
                    "sPaginationType" : "full_numbers",
                    "iDisplayLength"  : 20,
                    "bLengthChange"   : false,
                    "fnDrawCallback"  : function(){
                            if ( $('#'+tableid+'_paginate span a.paginate_button').size() )
                                $('#'+tableid+'_paginate')[0].style.display = "block";
                            else
                                $('#'+tableid+'_paginate')[0].style.display = "none";
                        },                    
                    "aaSorting": [[0, 'asc']],
                });
            } );
        </script>
    {% else %}
        <p>No comics are available.</p>
    {% endif %}
{% endblock %}
